<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Top-down Shooting Game</title>
<style>
* { box-sizing: border-box; }
body { margin: 0; font-family: system-ui, sans-serif; background: #0b0f1a; color: #f2f2f2; text-align: center; }
#ui { padding: 12px; background: linear-gradient(90deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02)); }
#game { display: block; margin: 12px auto; background: #1a2238; border: 4px solid #2d3a5c; box-shadow: 0 8px 30px rgba(0,0,0,0.7); }
#status, #info { margin-top: 6px; font-size: 14px; }
#retryBtn { display: none; margin: 10px auto; padding: 10px 20px; font-size: 16px; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; background: #e63946; color: #fff; box-shadow: 0 4px 10px rgba(0,0,0,0.5); transition: 0.2s; }
#retryBtn:hover { background: #d62828; }
</style>
</head>
<body>
<div id="ui">
<h1>Top-down Shooting Game</h1>
<div id="info">Move: WASD • Shoot: Click/Space • Weapon: 1/2/3 • Map: M</div>
<div id="status">HP: <span id="hp">100</span> • Weapon: <span id="wlevel">1</span> • Map: <span id="map">1</span></div>
<button id="retryBtn">Retry</button>
</div>
<canvas id="game" width="960" height="640"></canvas>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const hpEl = document.getElementById('hp');
const wlevelEl = document.getElementById('wlevel');
const mapEl = document.getElementById('map');
const retryBtn = document.getElementById('retryBtn');

const W = canvas.width, H = canvas.height;
const keys = {}; let mouse = { x: W/2, y: H/2, down: false };

const player = { x: W/2, y: H/2, r: 14, speed: 240, hp: 100, fireCooldown: 0, fireRate: 0.18, wlevel: 1 };
const bullets = [], enemyBullets = []; let enemies = [];

const maps = [
{ name: 'Arena', bg: '#0b132b', spawns: [[80,80],[880,80],[80,560],[880,560],[480,80]] },
{ name: 'Center Maze', bg: '#1c2541', spawns: [[240,160],[720,160],[240,480],[720,480],[480,320]] }
];
let mapIndex = 0;

let last = performance.now(); let gameOver = false;

function spawnEnemies() {
enemies = [];
const sp = maps[mapIndex].spawns;
for (let [x,y] of sp) enemies.push({ x, y, r: 16, hp: 20, speed: 60, shootTimer: Math.random()*2, shootRate: 1.2 });
}

function reset() {
player.x = W/2; player.y = H/2; player.hp = 100; player.wlevel = 1; player.fireCooldown = 0;
bullets.length = 0; enemyBullets.length = 0;
mapIndex = 0; mapEl.textContent = mapIndex+1; wlevelEl.textContent = player.wlevel; hpEl.textContent = player.hp;
gameOver = false; retryBtn.style.display = 'none';
spawnEnemies();
}

function playerShoot() {
if (player.fireCooldown > 0) return;
const angle = Math.atan2(mouse.y - player.y, mouse.x - player.x);
const speed = 420;
if (player.wlevel === 1) bullets.push({ x: player.x, y: player.y, vx: Math.cos(angle)*speed, vy: Math.sin(angle)*speed, dmg: 5 });
else if (player.wlevel === 2) for (let a of [angle-0.18, angle, angle+0.18]) bullets.push({ x: player.x, y: player.y, vx: Math.cos(a)*speed, vy: Math.sin(a)*speed, dmg: 4 });
else bullets.push({ x: player.x, y: player.y, vx: Math.cos(angle)*speed*1.4, vy: Math.sin(angle)*speed*1.4, dmg: 9 });
player.fireCooldown = player.fireRate;
}

function enemyShoot(e) {
const angle = Math.atan2(player.y - e.y, player.x - e.x);
enemyBullets.push({ x: e.x, y: e.y, vx: Math.cos(angle)*200, vy: Math.sin(angle)*200, dmg: 7 });
}
</html>





